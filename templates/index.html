<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title data-i18n="title">File Converter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container mt-5">
    <div class="converter-box">
        <h2 class="text-center mb-4" data-i18n="title">üõ†Ô∏è File Converter</h2>
        <div class="mb-3">
            <label for="language" class="form-label" data-i18n="language_label">üåê Language</label>
            <select id="language" class="form-select"></select>
        </div>

        <form id="convert-form" method="POST" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="file" class="form-label" data-i18n="select_files">Select files to convert</label>
                <input class="form-control" type="file" name="file" id="file" multiple required>
            </div>
            <div class="mb-3">
                <label for="format" class="form-label" data-i18n="choose_format">Choose output format</label>
                <select class="form-select" name="format" id="format" required>
                    <option value="">--</option>
                    <option value="pdf">PDF</option>
                    <option value="txt">Text</option>
                    <option value="html">HTML</option>
                    <option value="jpg">JPG</option>
                    <option value="png">PNG</option>
                </select>
            </div>
            <div class="mb-3" id="summary-box" style="display: none;">
                <h5 data-i18n="summary">üîç Summary</h5>
                <ul id="summary-list"></ul>
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-primary" data-i18n="convert_button">üöÄ Convert</button>
            </div>
        </form>

        <div class="progress mt-4" style="height: 20px; display: none;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;">0%</div>
        </div>
    </div>
    <div class="footer text-center mt-4">
        <span data-i18n="created_by">v2.1 | Created by Yoavs5771</span>
    </div>
</div>
<script src="/static/lang.js"></script>
<script>
    document.getElementById("convert-form").addEventListener("submit", function (e) {
        const files = document.getElementById("file").files;
        const format = document.getElementById("format").value;
        if (!files.length || !format) {
            alert(window.translations.fill_fields || "Please complete all fields.");
            e.preventDefault();
            return;
        }

        const summaryBox = document.getElementById("summary-box");
        const summaryList = document.getElementById("summary-list");
        summaryList.innerHTML = "";
        [...files].forEach(f => {
            const li = document.createElement("li");
            li.textContent = f.name;
            summaryList.appendChild(li);
        });
        const extra = document.createElement("li");
        extra.textContent = `Output format: ${format}`;
        summaryList.appendChild(extra);
        summaryBox.style.display = "block";

        const progressBar = document.querySelector(".progress");
        const progressInner = document.querySelector(".progress-bar");
        progressBar.style.display = "block";
        progressInner.style.width = "50%";
        progressInner.textContent = "Processing...";
    });
</script>
</body>
</html>
